[
    {
        "astCommandId": "mediagoblin:1:0",
        "astCommand": {
            "type": "SC-SET",
            "children": [
                {
                    "type": "SC-SET-F-X",
                    "children": []
                },
                {
                    "type": "SC-SET-F-E",
                    "children": []
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:1:1",
        "astCommand": {
            "type": "SC-APT-GET-UPDATE",
            "children": []
        }
    },
    {
        "astCommandId": "mediagoblin:1:2",
        "astCommand": {
            "type": "SC-APT-GET-INSTALL",
            "children": [
                {
                    "type": "SC-APT-GET-F-YES",
                    "children": []
                },
                {
                    "type": "SC-APT-GET-PACKAGES",
                    "children": [
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "automake"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gir1.2-gst-plugins-base-1.0"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gir1.2-gstreamer-1.0"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "git-core"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gstreamer1.0-libav"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gstreamer1.0-plugins-bad"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gstreamer1.0-plugins-base"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gstreamer1.0-plugins-good"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gstreamer1.0-plugins-ugly"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "gstreamer1.0-tools"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "libasound2-dev"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "libgstreamer-plugins-base1.0-dev"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "libsndfile1-dev"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "nginx"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "nodejs-legacy"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "npm"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "poppler-utils"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-dev"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-gi"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-gst-1.0"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-gst-1.0"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-imaging"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-lxml"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-numpy"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-scipy"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python-virtualenv"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "python3-gi"
                                }
                            ]
                        },
                        {
                            "type": "SC-APT-GET-PACKAGE",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "sudo"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:1:3",
        "astCommand": {
            "type": "SC-RM",
            "children": [
                {
                    "type": "SC-RM-F-RECURSIVE",
                    "children": []
                },
                {
                    "type": "SC-RM-F-FORCE",
                    "children": []
                },
                {
                    "type": "SC-RM-PATHS",
                    "children": [
                        {
                            "type": "SC-RM-PATH",
                            "children": [
                                {
                                    "type": "BASH-CONCAT",
                                    "children": [
                                        {
                                            "type": "BASH-LITERAL",
                                            "children": [],
                                            "value": "/var/lib/apt/lists/"
                                        },
                                        {
                                            "type": "BASH-GLOB",
                                            "children": [],
                                            "value": "*"
                                        }
                                    ]
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:2:0",
        "astCommand": {
            "type": "SC-SET",
            "children": [
                {
                    "type": "SC-SET-F-X",
                    "children": []
                },
                {
                    "type": "SC-SET-F-E",
                    "children": []
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:2:1",
        "astCommand": {
            "type": "SC-USER-ADD",
            "children": [
                {
                    "type": "SC-USER-ADD-HOME-DIR",
                    "children": [
                        {
                            "type": "BASH-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "/var/lib/mediagoblin"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "SC-USER-ADD-F-CREATE-HOME",
                    "children": []
                },
                {
                    "type": "SC-USER-ADD-F-SYSTEM",
                    "children": []
                },
                {
                    "type": "SC-USER-ADD-GID",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "www-data"
                        }
                    ]
                },
                {
                    "type": "SC-USER-ADD-LOGIN",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "mediagoblin"
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:2:2",
        "astCommand": {
            "type": "SC-GROUP-ADD",
            "children": [
                {
                    "type": "SC-GROUP-ADD-F-SYSTEM",
                    "children": []
                },
                {
                    "type": "SC-GROUP-ADD-GROUP",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "mediagoblin"
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:2:3",
        "astCommand": {
            "type": "SC-MKDIR",
            "children": [
                {
                    "type": "SC-MKDIR-F-PARENTS",
                    "children": []
                },
                {
                    "type": "SC-MKDIR-PATHS",
                    "children": [
                        {
                            "type": "SC-MKDIR-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "/var/log/mediagoblin"
                                }
                            ]
                        },
                        {
                            "type": "SC-MKDIR-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "/srv/mediagoblin.example.org/mediagoblin"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:2:4",
        "astCommand": {
            "type": "SC-CHOWN",
            "children": [
                {
                    "type": "SC-CHOWN-F-NO-DEREFERENCE",
                    "children": []
                },
                {
                    "type": "SC-CHOWN-F-RECURSIVE",
                    "children": []
                },
                {
                    "type": "SC-CHOWN-OWNER",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "mediagoblin:www-data"
                        }
                    ]
                },
                {
                    "type": "SC-CHOWN-PATHS",
                    "children": [
                        {
                            "type": "SC-CHOWN-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "/var/log/mediagoblin"
                                }
                            ]
                        },
                        {
                            "type": "SC-CHOWN-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "/srv/mediagoblin.example.org"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:2:5",
        "astCommand": {
            "type": "SC-ECHO",
            "children": [
                {
                    "type": "SC-ECHO-ITEMS",
                    "children": [
                        {
                            "type": "SC-ECHO-ITEM",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "mediagoblin ALL=(ALL:ALL) NOPASSWD: /usr/sbin/nginx, /bin/chown"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:0",
        "astCommand": {
            "type": "SC-SET",
            "children": [
                {
                    "type": "SC-SET-F-X",
                    "children": []
                },
                {
                    "type": "SC-SET-F-E",
                    "children": []
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:1",
        "astCommand": {
            "type": "SC-GIT-CLONE",
            "children": [
                {
                    "type": "SC-GIT-URL",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "http://git.savannah.gnu.org/r/mediagoblin.git"
                        }
                    ]
                },
                {
                    "type": "SC-GIT-DIRECTORY",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "."
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:2",
        "astCommand": {
            "type": "SC-GIT-CHECKOUT",
            "children": [
                {
                    "type": "SC-GIT-TARGET",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "stable"
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:3",
        "astCommand": {
            "type": "SC-GIT",
            "children": []
        }
    },
    {
        "astCommandId": "mediagoblin:5:4",
        "astCommand": {
            "type": "SC-GIT-SUBMODULE-UPDATE",
            "children": [
                {
                    "type": "SC-GIT-FORCE",
                    "children": []
                },
                {
                    "type": "SC-GIT-F-INIT",
                    "children": []
                },
                {
                    "type": "SC-GIT-F-RECURSIVE",
                    "children": []
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:5",
        "astCommand": {
            "type": "SC-CONFIGURE",
            "children": []
        }
    },
    {
        "astCommandId": "mediagoblin:5:6",
        "astCommand": {
            "type": "SC-MAKE",
            "children": []
        }
    },
    {
        "astCommandId": "mediagoblin:5:7",
        "astCommand": {
            "type": "SC-LN",
            "children": [
                {
                    "type": "SC-LN-F-SYMBOLIC",
                    "children": []
                },
                {
                    "type": "SC-LN-TARGET",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "/var/lib/mediagoblin"
                        }
                    ]
                },
                {
                    "type": "SC-LN-LINK",
                    "children": [
                        {
                            "type": "BASH-LITERAL",
                            "children": [],
                            "value": "user_dev"
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:8",
        "astCommand": {
            "type": "SC-CP",
            "children": [
                {
                    "type": "SC-CP-F-ARCHIVE",
                    "children": []
                },
                {
                    "type": "SC-CP-F-VERBOSE",
                    "children": []
                },
                {
                    "type": "SC-CP-PATHS",
                    "children": [
                        {
                            "type": "SC-CP-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "mediagoblin.ini"
                                }
                            ]
                        },
                        {
                            "type": "SC-CP-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "mediagoblin_local.ini"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:9",
        "astCommand": {
            "type": "SC-CP",
            "children": [
                {
                    "type": "SC-CP-F-ARCHIVE",
                    "children": []
                },
                {
                    "type": "SC-CP-F-VERBOSE",
                    "children": []
                },
                {
                    "type": "SC-CP-PATHS",
                    "children": [
                        {
                            "type": "SC-CP-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "paste.ini"
                                }
                            ]
                        },
                        {
                            "type": "SC-CP-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "paste_local.ini"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:10",
        "astCommand": {
            "type": "SC-SED",
            "children": [
                {
                    "type": "SC-SED-F-IN-PLACE",
                    "children": []
                },
                {
                    "type": "SC-SED-EXPRESSIONS",
                    "children": [
                        {
                            "type": "SC-SED-EXPRESSION",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "s@.*sql_engine = .*@sql_engine = sqlite:////var/lib/mediagoblin/mediagoblin.db@"
                                }
                            ]
                        }
                    ]
                },
                {
                    "type": "SC-SED-PATHS",
                    "children": [
                        {
                            "type": "SC-SED-PATH",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "mediagoblin_local.ini"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:11",
        "astCommand": {
            "type": "SC-ECHO",
            "children": [
                {
                    "type": "SC-ECHO-ITEMS",
                    "children": [
                        {
                            "type": "SC-ECHO-ITEM",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "[[mediagoblin.media_types.video]]"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:12",
        "astCommand": {
            "type": "SC-ECHO",
            "children": [
                {
                    "type": "SC-ECHO-ITEMS",
                    "children": [
                        {
                            "type": "SC-ECHO-ITEM",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "[[mediagoblin.media_types.audio]]"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    },
    {
        "astCommandId": "mediagoblin:5:13",
        "astCommand": {
            "type": "SC-ECHO",
            "children": [
                {
                    "type": "SC-ECHO-ITEMS",
                    "children": [
                        {
                            "type": "SC-ECHO-ITEM",
                            "children": [
                                {
                                    "type": "BASH-LITERAL",
                                    "children": [],
                                    "value": "[[mediagoblin.media_types.pdf]]"
                                }
                            ]
                        }
                    ]
                }
            ]
        }
    }
]